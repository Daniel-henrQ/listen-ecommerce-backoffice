/* =======================================================================
   COMPONENTES REUTILIZÁVEIS (ESTILO ORIGINAL + MELHORIAS)
   ======================================================================= */

/* --- HEADER --- */
.header-fixed h1, h2, h3 {
   font-family: var(--font-family-title);
}

.header-fixed h1 {
   font-size: 20px;
   font-weight: 700;
   color: var(--theme-text-dark);
}

.header-actions {
   display: flex;
   align-items: center;
   gap: 20px;
}

.header-icon {
   color: var(--theme-text-medium);
   width: 22px;
   height: 22px;
   fill: none;
   stroke: currentColor;
   stroke-width: 2;
   stroke-linecap: round;
   stroke-linejoin: round;
   cursor: pointer;
}

.user-profile {
   cursor: pointer;
   display: flex;
   align-items: center;
   gap: 16px;
   position: relative;
}

.user-details {
   text-align: right;
}

.user-name {
   font-weight: 700;
   font-size: 14px;
   padding-right: 5px;
}

.user-role {
   font-size: 12px;
   color: var(--theme-text-medium);
}

.dropdown-user-menu {
   display: none;
   position: absolute;
   top: 110%;
   right: 0;
   background-color: var(--theme-bg-surface);
   border-radius: 8px;
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
   min-width: 120px;
   z-index: 1100;
   border: 1px solid var(--theme-border);
}

.dropdown-user-menu.show {
   display: block;
}

.dropdown-user-menu a {
   display: block;
   padding: 12px 15px;
   color: var(--theme-danger);
   font-weight: 700;
}

.dropdown-user-menu a:hover {
   background-color: var(--gray-200);
}

/* --- SIDEBAR --- */
.sidebar-header {
   padding: 20px 25px;
   border-bottom: 1px solid var(--gray-700);
}

.sidebar-header img {
   height: 35px; /* Mantido do original */
}

.sidebar-menu a {
   display: flex;
   align-items: center;
   gap: 15px;
   padding: 18px 25px;
   cursor: pointer;
   transition: background-color 0.2s ease;
   border-left: 4px solid transparent;
   color: var(--theme-text-medium);
   font-weight: 700;
}

.sidebar-menu a svg {
   width: 20px;
   height: 20px;
   fill: none;
   stroke: currentColor;
   stroke-width: 2;
   stroke-linecap: round;
   stroke-linejoin: round;
}

.sidebar-menu a:hover {
   background-color: var(--gray-800);
   color: var(--theme-text-light);
}

.sidebar-menu a.active {
   background-color: var(--theme-sidebar-active);
   border-left-color: var(--theme-accent-blue);
   color: var(--theme-text-light);
}

/* --- VIEW HEADER E AÇÕES DE SELEÇÃO --- */
.view-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 25px;
}

.view-header h2 {
   font-family: var(--font-family-title);
   font-size: 28px;
   font-weight: 700;
   color: var(--theme-text-dark);
}

/* --- BARRA DE AÇÕES --- */
.action-bar {
   display: flex;
   justify-content: space-between;
   align-items: center;
   margin-bottom: 25px;
   padding: 15px 20px;
   background-color: var(--theme-bg-surface);
   border-radius: 8px;
   border: 1px solid var(--theme-border);
}

.filter-tabs {
   display: flex;
   align-items: center;
   gap: 15px;
}

.filter-tab {
   font-weight: 700;
   color: var(--theme-text-medium);
   cursor: pointer;
   padding: 5px 0; /* Add some vertical padding */
   border-bottom: 2px solid transparent; /* Prepare for active state */
   transition: color 0.2s, border-color 0.2s;
}

.filter-tab:hover {
    color: var(--theme-text-dark);
}

.filter-tab.active {
   color: var(--theme-text-dark);
   border-bottom-color: var(--theme-accent-blue); /* Highlight active tab */
}

.search-add {
   display: flex;
   align-items: center;
   gap: 15px;
}

/* --- BARRA DE PESQUISA MODERNA --- */
.search-box {
   position: relative;
   display: flex; /* Para alinhar o ícone */
   align-items: center;
   background-color: var(--white); /* Fundo branco */
   border: 1px solid var(--gray-400); /* Borda padrão */
   border-radius: 8px; /* Bordas arredondadas */
   padding-left: 15px; /* Espaço para o ícone */
   transition: border-color 0.2s, box-shadow 0.2s;
   width: 250px; /* Largura padrão */
}

.search-box:focus-within { /* Estilo quando o input dentro está focado */
    outline: none;
    border-color: var(--theme-accent-blue);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2);
}

.search-box .search-icon {
   /* Ícone não precisa mais ser absoluto */
   color: var(--theme-text-medium);
   width: 16px;
   height: 16px;
   margin-right: 10px; /* Espaço entre ícone e texto */
   fill: currentColor;
}

.search-box input {
    flex-grow: 1; /* Ocupa o espaço restante */
    border: none; /* Remove a borda do input */
    outline: none; /* Remove o outline do input */
    padding: 12px 15px 12px 0; /* Padding interno (sem padding left) */
    background: transparent; /* Fundo transparente */
    font-size: 14px;
    color: var(--theme-text-dark);
    min-height: 43px; /* Altura consistente com outros inputs */
    box-sizing: border-box;
}
.search-box input::placeholder {
    color: var(--theme-text-medium);
}


/* --- BOTÕES --- */
.add-button, .delete-button, .edit-btn, .delete-btn {
    background-color: var(--gray-800);
    color: var(--white);
    border: none;
    padding: 12px 20px;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 700;
    transition: background-color 0.2s;
    font-size: 14px; /* Padronizar tamanho da fonte */
    display: inline-flex; /* Para alinhar ícones se houver */
    align-items: center;
    justify-content: center;
    gap: 8px; /* Espaço para ícones */
    white-space: nowrap; /* Evitar quebra de linha */
}

.add-button:hover, .delete-button:hover, .edit-btn:hover, .delete-btn:hover {
    background-color: var(--gray-900);
}

/* Botões específicos de Excluir/Cancelar */
.delete-button, .delete-btn {
    background-color: var(--theme-danger);
    color: var(--white);
}
.delete-button:hover, .delete-btn:hover {
    background-color: #c0392b; /* Um vermelho um pouco mais escuro no hover */
}


/* --- INPUTS --- */
.vertical-form input, .vertical-form select, .vertical-form textarea {
    background-color: var(--white); /* Fundo branco para melhor leitura */
    border: 1px solid var(--gray-400);
    border-radius: 8px;
    padding: 12px 15px;
    width: 100%;
    font-size: 14px; /* Padronizar fonte */
    color: var(--theme-text-dark); /* Texto escuro */
    transition: border-color 0.2s, box-shadow 0.2s; /* Adicionar transição */
    min-height: 45px;
    box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
}
/* Estilo para Select */
.vertical-form select {
    appearance: none; /* Remove estilo padrão */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%236C757D' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); /* Seta customizada */
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 16px 12px;
    padding-right: 40px; /* Espaço para a seta */
}

/* ESTADO DE FOCO */
.vertical-form input:focus, .vertical-form select:focus, .vertical-form textarea:focus {
    outline: none;
    border-color: var(--theme-accent-blue);
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2); /* Sombra de foco mais visível */
}

/* --- ESTILO DE ERRO PARA INPUTS (BORDA VERMELHA) --- */
/* Aplica borda vermelha e sombra vermelha suave quando a classe .input-error está presente */
.input-group input.input-error,
.input-group select.input-error,
.input-group textarea.input-error {
    border-color: var(--theme-danger) !important; /* !important para garantir sobreposição */
    box-shadow: 0 0 0 3px rgba(231, 76, 60, 0.2) !important; /* Sombra vermelha suave */
}
/* Intensifica a sombra vermelha no foco para campos com erro */
.input-group input.input-error:focus,
.input-group select.input-error:focus,
.input-group textarea.input-error:focus {
     
}


/* MENSAGEM DE ERRO ABAIXO DO INPUT */
.error-message-text {
    color: var(--theme-danger);
    font-size: 0.85em; /* Ligeiramente menor */
    margin-top: 5px; /* Mais espaço */
    display: block;
    text-align: left; /* Alinhar à esquerda por padrão */
}

/* MENSAGEM GERAL DO FORMULÁRIO */
.form-message {
   margin-top: 15px;
   font-weight: bold;
   text-align: center;
   min-height: 20px; /* Evita 'pulos' no layout */
   font-size: 0.9em; /* Ligeiramente menor */
}
.form-message.error {
   color: var(--theme-danger);
}
.form-message.success {
   color: green; /* Ou uma variável de tema, se preferir */
}


/* --- TABELAS --- */
.table-container {
   background-color: var(--theme-bg-surface);
   border-radius: 8px;
   border: 1px solid var(--theme-border);
   overflow: visible; /* Mantido 'visible' para o menu */
}

table {
   width: 100%;
   border-collapse: collapse;
}

th,
td {
   padding: 18px 20px;
   text-align: left;
   border-bottom: 1px solid var(--theme-border);
   font-size: 14px; /* Padronizar fonte da tabela */
   vertical-align: middle; /* Alinhar verticalmente */
}

th {
   color: var(--theme-text-medium);
   font-weight: 700; /* Cabeçalho mais forte */
   text-transform: uppercase;
   font-family: var(--font-family-title);
   white-space: nowrap; /* Evitar quebra de linha no cabeçalho */
}

tr:last-child td {
   border-bottom: none;
}

.product-cover {
   width: 40px;
   height: 40px;
   border-radius: 4px;
   object-fit: cover;
   vertical-align: middle;
   margin-right: 10px;
   border: 1px solid var(--theme-border); /* Adiciona uma borda sutil */
   cursor: pointer; /* Indica que é clicável */
}

/* --- MENU DE AÇÃO "..." --- */
td.actions {
   position: relative; /* Necessário para posicionar o menu dropdown */
   text-align: right;
   white-space: nowrap;
}

/* AJUSTE: Estilos para o botão .action-btn (usado no React) */
.action-btn {
   background: none;
   border: none;
   cursor: pointer;
   padding: 5px; /* Padding para área clicável */
   display: inline-flex;
   align-items: center;
   justify-content: center;
   border-radius: 4px; /* Borda arredondada suave */
   transition: background-color 0.2s;
}

.action-btn:hover {
    background-color: var(--gray-200); /* Fundo suave no hover */
}

.action-btn svg {
   width: 20px; /* Tamanho do ícone '...' */
   height: 20px;
   stroke: var(--theme-text-medium); /* Cor do ícone */
}

/* AJUSTE: Estilos para o dropdown .action-menu (usado no React) */
.action-menu {
    position: absolute;
    top: 100%; /* Posiciona abaixo do botão */
    right: 0; /* Alinha à direita da célula */
    background-color: var(--theme-bg-surface);
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    min-width: 120px; /* Largura mínima */
    z-index: 10; /* Garante que fique acima da tabela, mas abaixo do header/sidebar */
    border: 1px solid var(--theme-border);
    list-style: none;
    padding: 5px 0; /* Espaçamento vertical interno */
    margin: 5px 0 0 0; /* Pequeno espaço acima do menu */
    display: block; /* Garante que seja visível quando renderizado */
}

.action-menu-item {
    padding: 10px 15px; /* Espaçamento dos itens */
    cursor: pointer;
    font-size: 14px;
    color: var(--theme-text-dark);
    white-space: nowrap; /* Evita quebra de linha */
}

.action-menu-item:hover {
    background-color: var(--gray-200); /* Fundo no hover */
}

.action-menu-item.delete {
    color: var(--theme-danger); /* Cor vermelha para excluir */
    font-weight: bold; /* Opcional: negrito */
}

.action-menu-item.delete:hover {
    background-color: #fceaea; /* Fundo vermelho bem claro no hover */
    color: #c0392b; /* Vermelho mais escuro no hover */
}


/* --- NOVO MODAL DE AÇÕES (se ainda for usado em algum lugar) --- */
.action-modal-content {
    display: flex;
    flex-direction: column;
    gap: 15px; /* Espaço entre os botões */
    padding: 20px; /* Padding interno */
}

.action-modal-button {
    width: 100%;
    padding: 12px 20px;
    font-size: 14px;
    font-weight: 700;
    border-radius: 8px;
    cursor: pointer;
    text-align: center;
    transition: background-color 0.2s, color 0.2s, box-shadow 0.2s, border-color 0.2s;
    border: 1px solid transparent; /* Para manter o layout consistente */
}

.action-modal-button.edit {
    background-color: var(--gray-800);
    color: var(--white);
    border-color: var(--gray-800);
}
.action-modal-button.edit:hover {
    background-color: var(--gray-900);
    border-color: var(--gray-900);
}

.action-modal-button.delete {
    background-color: var(--theme-danger);
    color: var(--white);
    border-color: var(--theme-danger);
}
.action-modal-button.delete:hover {
    background-color: #c0392b; /* Vermelho mais escuro */
    border-color: #c0392b;
}

.action-modal-button.cancel {
    background-color: transparent;
    color: var(--theme-text-medium);
    border-color: var(--gray-400);
}
.action-modal-button.cancel:hover {
    background-color: var(--gray-200);
    color: var(--theme-text-dark);
    border-color: var(--gray-500);
}


/* --- POPUPS (MODAL) --- */
.popup-overlay {
   position: fixed;
   top: 0;
   left: 0;
   width: 100%;
   height: 100%;
   background: rgba(0, 0, 0, 0.5);
   display: none; /* Controlado pelo React agora */
   justify-content: center;
   align-items: center;
   z-index: 2000;
   padding: 20px; /* Adicionar padding para evitar que o modal toque as bordas em telas pequenas */
}

.popup {
   background: var(--theme-bg-surface);
   padding: 30px;
   border-radius: 8px;
   border: 1px solid var(--theme-border);
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
   max-height: 90vh; /* Altura máxima */
   display: flex; /* Usar flexbox para layout interno */
   flex-direction: column; /* Organizar conteúdo verticalmente */
   min-width: 400px; /* Largura mínima padrão */
   max-width: 90vw; /* Largura máxima */
}

/* Estilo específico para modais menores, como o de Ações */
.popup.popup-small {
    min-width: 300px;
    max-width: 400px;
}


.popup h3 {
   font-family: var(--font-family-title);
   text-align: center;
   margin-bottom: 25px;
   font-size: 24px;
   color: var(--theme-text-dark); /* Cor do título */
   flex-shrink: 0; /* Impedir que o título encolha */
}

.vertical-form {
   overflow-y: auto; /* Permitir scroll APENAS no formulário */
   padding-right: 10px; /* Espaço para scrollbar se necessário */
   flex-grow: 1; /* Fazer o formulário ocupar o espaço restante */
}

.vertical-form .input-group {
   margin-bottom: 15px;
}

.vertical-form label {
   display: block;
   font-weight: bold;
   margin-bottom: 5px;
   text-align: left;
   font-size: 13px; /* Tamanho da label */
   color: var(--theme-text-medium); /* Cor mais suave */
}

/* Indicador de campo obrigatório */
.vertical-form label.required::after {
    content: " *";
    color: var(--theme-danger);
    font-weight: bold;
}

.popup-actions {
   display: flex;
   justify-content: flex-end;
   gap: 10px;
   margin-top: 25px; /* Mais espaço acima dos botões */
   padding-top: 20px; /* Espaço interno */
   border-top: 1px solid var(--theme-border); /* Linha divisória */
   flex-shrink: 0; /* Impedir que a área de ações encolha */
}


/* --- NOTIFICAÇÕES --- */
.notification-icon {
   position: relative;
   cursor: pointer; /* Indicar que é clicável */
}

.notification-badge {
   position: absolute;
   top: -5px;
   right: -8px;
   background-color: var(--theme-danger);
   color: white;
   border-radius: 50%;
   width: 20px;
   height: 20px;
   display: none; /* Controlado pelo JS/React */
   justify-content: center;
   align-items: center;
   font-size: 11px; /* Ligeiramente menor */
   font-weight: bold;
   border: 1px solid var(--white); /* Borda branca para destaque */
}

.notification-badge.show {
   display: flex;
}

.dropdown-notification-menu {
   display: none; /* Controlado pelo JS/React */
   position: absolute;
   top: 60px; /* Ajustar conforme altura do header */
   right: 80px; /* Ajustar posição */
   width: 350px;
   max-width: 90vw; /* Limitar largura em telas menores */
   background-color: var(--theme-bg-surface);
   border-radius: 8px;
   box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
   z-index: 1100;
   flex-direction: column;
   border: 1px solid var(--theme-border);
   overflow: hidden; /* Para bordas arredondadas */
}

.dropdown-notification-menu.show {
   display: flex;
}

.notification-header {
   padding: 15px;
   border-bottom: 1px solid var(--theme-border);
   background-color: var(--gray-200); /* Fundo levemente diferente */
}

.notification-header h3 {
   margin: 0;
   font-size: 16px;
   font-family: var(--font-family-title);
   color: var(--theme-text-dark);
}

.notification-list {
   list-style: none;
   padding: 0;
   margin: 0;
   max-height: 300px;
   overflow-y: auto;
}

.notification-list li {
   padding: 15px;
   border-bottom: 1px solid var(--theme-border);
   font-size: 14px;
   color: var(--theme-text-dark);
   line-height: 1.4;
}
.notification-list li:last-child {
    border-bottom: none; /* Remover borda do último item */
}

.notification-list li.unread {
   background-color: #f0f8ff; /* Azul claro para não lidas */
   font-weight: bold; /* Destacar não lidas */
}

.notification-list .empty-state {
   text-align: center;
   color: var(--theme-text-medium);
   padding: 30px;
   font-style: italic;
}

/* --- Estilos Específicos para Popup de Fornecedores/Clientes --- */
.popup.popup-fornecedor, /* Reutilizar para clientes */
.popup.popup-cliente {
   min-width: 700px;
   max-width: 800px; /* Aumentar um pouco a largura máxima */
}

.form-grid {
   display: grid;
   grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Colunas responsivas */
   gap: 20px 30px; /* Aumentar espaço entre colunas */
}

/* --- Estilos Específicos para Popup de Produtos --- */
.popup.popup-produto {
   min-width: 700px; /* Manter largura */
   max-width: 800px;
}

/* --- Estilo para popup de imagem --- */
.image-popup-content {
    background-color: var(--white);
    padding: 20px;
    border-radius: 8px;
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2); /* Sombra para destacar */
}

.close-image-popup {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 24px;
    font-weight: bold;
    color: var(--gray-600);
    cursor: pointer;
    line-height: 1; /* Ajustar alinhamento */
}
.close-image-popup:hover {
    color: var(--gray-900);
}

#imagem-ampliada {
    max-width: 100%;
    max-height: calc(90vh - 80px); /* Ajustar altura máxima considerando padding e espaço */
    display: block;
    margin: auto;
    border-radius: 4px; /* Pequeno arredondamento */
}

/* --- Responsividade Extra para Barra de Pesquisa --- */
@media (max-width: 768px) {
    .search-box {
        width: 100%; /* Ocupa toda a largura em mobile */
    }
}