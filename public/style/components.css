/* =======================================================================
   COMPONENTES REUTILIZÁVEIS (WIREFRAME FINAL)
   ======================================================================= */

/* --- HEADER --- */
.header-fixed h1 { font-size: 20px; font-weight: 700; color: var(--theme-text-dark); }
.header-actions { display: flex; align-items: center; gap: 20px; }
.header-icon { color: var(--theme-text-medium); width: 22px; height: 22px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; cursor: pointer; }
.user-profile { cursor: pointer; display: flex; align-items: center; gap: 16px; position: relative; }
.user-details { text-align: right; }
.user-name { font-weight: 700; font-size: 14px; padding-right:5px; }
.user-role { font-size: 12px; color: var(--theme-text-medium); }
.dropdown-user-menu { display: none; position: absolute; top: 110%; right: 0; background-color: var(--theme-bg-surface); border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); min-width: 120px; z-index: 1100; }
.dropdown-user-menu.show { display: block; }
.dropdown-user-menu a { display: block; padding: 12px 15px; color: var(--theme-danger); font-weight: 700; }
.dropdown-user-menu a:hover { background-color: #f5f5f5; }

/* --- BOTÃO DO MENU MOBILE (CORREÇÃO) --- */
.mobile-menu-button {
    display: none; /* Esconde o botão por defeito em todos os ecrãs */
}

/* --- SIDEBAR --- */
.sidebar-header { padding: 20px 25px; border-bottom: 1px solid #444; }
.sidebar-header img { height: 35px; }
.sidebar-menu li { display: flex; align-items: center; gap: 15px; padding: 18px 25px; cursor: pointer; transition: background-color 0.2s ease; border-left: 4px solid transparent; color: var(--theme-text-medium); font-weight: 700; }
.sidebar-menu li svg { width: 20px; height: 20px; fill: none; stroke: currentColor; stroke-width: 2; stroke-linecap: round; stroke-linejoin: round; }
.sidebar-menu li:hover { background-color: #3a3a3a; color: var(--theme-text-light); }
.sidebar-menu li.active { background-color: var(--theme-sidebar-active); border-left-color: var(--theme-accent-blue); color: var(--theme-text-light); }

/* --- VIEW HEADER E AÇÕES DE SELEÇÃO --- */
.view-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
.view-header h2 { font-size: 28px; font-weight: 700; color: var(--theme-text-dark); }
.delete-button { background-color: var(--theme-danger); color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; }

/* --- BARRA DE AÇÕES --- */
.action-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; padding: 15px 20px; background-color: var(--theme-bg-surface); border-radius: 12px; }
.filter-tabs { display: flex; align-items: center; gap: 15px; }
.filter-tab { font-weight: 700; color: var(--theme-text-medium); cursor: pointer; }
.filter-tab.active { color: var(--theme-text-dark); }
.tab-divider { width: 1px; height: 20px; background-color: var(--theme-border); }
.genre-list { margin-left: 10px; }
.search-add { display: flex; align-items: center; gap: 15px; }
.search-box { position: relative; }
.search-box .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: var(--theme-text-medium); width: 16px; height: 16px; fill: currentColor; }
.search-box input { width: 250px; padding: 12px 15px 12px 40px; border: 1px solid var(--theme-border); border-radius: 8px; background-color: #fff; }

/* --- BOTÕES --- */
.add-button { background-color: var(--theme-accent-blue); color: #fff; padding: 12px 20px; border-radius: 8px; border: none; font-weight: 700; cursor: pointer; transition: opacity 0.2s; }
.add-button:hover { opacity: 0.85; }
.secondary-button { padding: 12px 20px; border-radius: 8px; font-weight: 700; background-color: #f0f0f0; border: 1px solid var(--theme-border); color: var(--theme-text-dark); cursor: pointer; }
.edit-btn, .delete-btn { padding: 8px 12px; border-radius: 6px; border: 1px solid var(--theme-border); cursor: pointer; background-color: #fff; font-weight: 700; }
.delete-btn { color: var(--theme-danger); border-color: var(--theme-danger); }

/* --- TABELAS --- */
.table-container { background-color: var(--theme-bg-surface); border-radius: 8px; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 18px 20px; text-align: left; border-bottom: 1px solid var(--theme-border); vertical-align: middle; } /* Alinhamento vertical adicionado */
th { color: var(--theme-text-medium); font-size: 14px; font-weight: 400; text-transform: uppercase; }
tr:last-child td { border-bottom: none; }
td.actions { position: relative; }
.action-button { background: none; border: none; font-size: 20px; cursor: pointer; color: var(--theme-text-medium); }

/* NOVO: Estilo para a imagem da capa do produto na tabela */
.product-cover {
    width: 40px;
    height: 40px;
    border-radius: 4px;
    object-fit: cover;
    vertical-align: middle;
    margin-right: 10px;
    cursor: pointer; /* Adicionado para indicar que a imagem é clicável */
}

/* --- POPUPS (MODAL) --- */
.popup-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: none; justify-content: center; align-items: center; z-index: 2000; }
.popup { background: var(--theme-bg-surface); padding: 30px; border-radius: 12px; min-width: 400px; max-height: 90vh; overflow-y: auto; } /* Adicionado max-height e overflow */
.popup.large { min-width: 700px; }
.popup h3 { text-align: center; margin-bottom: 25px; font-size: 24px; }
.popup-actions { display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px; }

/* O input-row para adicionar vários produtos não é mais necessário, pode ser removido ou ignorado */
.input-row { display: grid; grid-template-columns: 2fr 1.5fr 1.5fr 0.5fr 1fr; gap: 10px; margin-bottom: 10px; }
.input-row input { padding: 12px; border: 1px solid var(--theme-border); border-radius: 8px; width: 100%; }

.vertical-form .input-group { margin-bottom: 15px; }
.vertical-form label { display: block; font-weight: bold; margin-bottom: 5px; text-align: left; }
.vertical-form input, .vertical-form select, .vertical-form textarea { width: 100%; padding: 12px; border: 1px solid var(--theme-border); border-radius: 8px; font-family: inherit; }

/* AJUSTE: Estilo para o campo de upload de ficheiro */
.vertical-form input[type="file"] {
    padding: 9px;
}
/* Oculta o texto padrão e permite customização */
.vertical-form input[type="file"]::file-selector-button {
    margin-right: 10px;
    border: none;
    background: var(--theme-accent-blue);
    padding: 8px 12px;
    border-radius: 6px;
    color: #fff;
    cursor: pointer;
    transition: background .2s ease-in-out;
}
.vertical-form input[type="file"]::file-selector-button:hover {
    background: #0056b3;
}

.form-message { margin-top: 15px; font-weight: bold; text-align: center; min-height: 20px; }

/* --- ESTILOS DE NOTIFICAÇÃO --- */
.notification-icon { position: relative; cursor: pointer; }
.notification-badge { position: absolute; top: -5px; right: -8px; background-color: var(--theme-danger); color: white; border-radius: 50%; width: 20px; height: 20px; display: flex; justify-content: center; align-items: center; font-size: 12px; font-weight: bold; }
.dropdown-notification-menu { display: none; position: absolute; top: 60px; right: 80px; width: 350px; max-height: 400px; background-color: var(--theme-bg-surface); border-radius: 8px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); z-index: 1100; overflow: hidden; flex-direction: column; }
.dropdown-notification-menu.show { display: flex; }
.notification-header { padding: 15px; border-bottom: 1px solid var(--theme-border); }
.notification-header h3 { margin: 0; font-size: 16px; }
.notification-list { list-style: none; padding: 0; margin: 0; overflow-y: auto; }

/* --- ADICIONADO: ESTILOS PARA O POPUP DE VISUALIZAÇÃO DE IMAGEM --- */
.image-popup-content {
    position: relative;
    max-width: 90vw;
    max-height: 90vh;
}
#imagem-ampliada {
    max-width: 100%;
    max-height: 100%;
    display: block;
    border-radius: 8px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
}
.close-image-popup {
    position: absolute;
    top: -15px;
    right: -15px;
    color: white;
    background-color: #333;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    font-weight: bold;
    cursor: pointer;
    border: 2px solid white;
}
.close-image-popup:hover {
    background-color: var(--theme-danger);
}